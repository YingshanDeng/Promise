!function(t,e){if("function"==typeof define&&define.amd)define(["module","exports"],e);else if("undefined"!=typeof exports)e(module,exports);else{var n={exports:{}};e(n,n.exports),t.promise=n.exports}}(this,function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=0,o=function(){function t(e){if(n(this,t),!this._isFunction(e))throw new TypeError("Promise argument error:"+e.toString());this._status=i,this._v=void 0,this._onResolvedCb=[],this._onRejectedCb=[],e(this._resolve.bind(this),this._reject.bind(this))}return r(t,[{key:"_resolve",value:function(t){var e=this;setTimeout(function(){if(e._status===i){e._status=1,e._v=t;for(var n=void 0;n=e._onResolvedCb.shift();)n.call(e,t)}})}},{key:"_reject",value:function(t){var e=this;setTimeout(function(){if(e._status===i){e._status=2,e._v=t;for(var n=void 0;n=e._onRejectedCb.shift();)n.call(e,t)}})}},{key:"then",value:function(e,n){var r=this;return e=this._isFunction(e)?e:function(t){return t},n=this._isFunction(n)?n:function(t){throw t},new t(function(o,u){switch(r._status){case i:r._onResolvedCb.push(function(n){try{var r=e(n);r instanceof t?r.then(o,u):o(r)}catch(t){u(t)}}),r._onRejectedCb.push(function(e){try{var r=n(e);r instanceof t?r.then(o,u):o(r)}catch(t){u(t)}});break;case 1:setTimeout(function(){try{var n=e(r._v);n instanceof t?n.then(o,u):o(n)}catch(t){u(t)}});break;case 2:setTimeout(function(){try{var e=n(r._v);e instanceof t?e.then(o,u):o(e)}catch(t){u(t)}})}})}},{key:"catch",value:function(t){return this.then(null,t)}},{key:"_isFunction",value:function(t){return t&&"function"==typeof t}}],[{key:"resolve",value:function(e){return new t(function(t,n){t(e)})}},{key:"reject",value:function(e){return new t(function(t,n){n(e)})}},{key:"all",value:function(e){if(!Array.isArray(e))throw new TypeError(e+" is not array!");return new t(function(t,n){function r(e){return function(n){o[e]=n,--i||t(o)}}var i=e.length,o=[];e.forEach(function(t,e){return t.then(r(e),n)})})}},{key:"race",value:function(e){if(!Array.isArray(e))throw new TypeError(e+" is not array!");return new t(function(t,n){e.forEach(function(e){return e.then(t,n)})})}}]),t}();e.default=o,t.exports=e.default});