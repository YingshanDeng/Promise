!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.promise=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=0,u=function(){function e(t){if(n(this,e),!this._isFunction(t))throw new TypeError("Promise argument error:"+t.toString());this._status=i,this._v=void 0,this._onResolvedCb=[],this._onRejectedCb=[],t(this._resolve.bind(this),this._reject.bind(this))}return r(e,[{key:"_resolve",value:function(e){var t=this;setTimeout(function(){if(t._status===i){t._status=1,t._v=e;for(var n=void 0;n=t._onResolvedCb.shift();)n.call(t,e)}})}},{key:"_reject",value:function(e){var t=this;setTimeout(function(){if(t._status===i){t._status=2,t._v=e;for(var n=void 0;n=t._onRejectedCb.shift();)n.call(t,e)}})}},{key:"then",value:function(t,n){var o=this;t=this._isFunction(t)?t:function(e){return e},n=this._isFunction(n)?n:function(e){throw e};var r=new e(function(u,s){switch(o._status){case i:o._onResolvedCb.push(function(n){try{var o=t(n);e.resolvePromise(r,o,u,s)}catch(e){s(e)}}),o._onRejectedCb.push(function(t){try{var o=n(t);e.resolvePromise(r,o,u,s)}catch(e){s(e)}});break;case 1:setTimeout(function(){try{var n=t(o._v);e.resolvePromise(r,n,u,s)}catch(e){s(e)}});break;case 2:setTimeout(function(){try{var t=n(o._v);e.resolvePromise(r,t,u,s)}catch(e){s(e)}})}});return r}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_isFunction",value:function(e){return e&&"function"==typeof e}}],[{key:"resolvePromise",value:function(t,n,r,u){var s,c=!1;if(t!==n)if(n instanceof e)n._status===i?n.then(function(n){e.resolvePromise(t,n,r,u)},u):n.then(r,u);else if(null===n||"object"!==(void 0===n?"undefined":o(n))&&"function"!=typeof n)r(n);else try{"function"==typeof(s=n.then)?s.call(n,function(n){c||(c=!0,e.resolvePromise(t,n,r,u))},function(e){c||(c=!0,u(e))}):r(n)}catch(e){if(c)return;c=!0,u(e)}else u(new TypeError("Chaining cycle detected for promise!"))}},{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"all",value:function(t){if(!Array.isArray(t))throw new TypeError(t+" is not array!");return new e(function(e,n){function o(t){return function(n){i[t]=n,--r||e(i)}}var r=t.length,i=[];t.forEach(function(e,t){return e.then(o(t),n)})})}},{key:"race",value:function(t){if(!Array.isArray(t))throw new TypeError(t+" is not array!");return new e(function(e,n){t.forEach(function(t){return t.then(e,n)})})}}]),e}();t.default=u,e.exports=t.default});