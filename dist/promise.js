!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.promise=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=0,s=function(){function e(t){if(n(this,e),!this._isFunction(t))throw new TypeError("Promise argument error:"+t.toString());this._status=r,this._v=void 0,this._onResolvedCb=[],this._onRejectedCb=[],t(this._resolve.bind(this),this._reject.bind(this))}return i(e,[{key:"_resolve",value:function(e){var t=this;this._status===r&&(this._status=1,this._v=e,setTimeout(function(){for(var n=void 0;n=t._onResolvedCb.shift();)n.call(t,e)}))}},{key:"_reject",value:function(e){var t=this;this._status===r&&(this._status=2,this._v=e,setTimeout(function(){for(var n=void 0;n=t._onRejectedCb.shift();)n.call(t,e)}))}},{key:"then",value:function(t,n){var i=this;return new e(function(e,r){return i._thenHandler(e,r,t,n)})}},{key:"_thenHandler",value:function(e,t,n,i){var s=this._resolveWrapper(e,t,n),o=this._rejectWrapper(e,t,i);switch(this._status){case r:this._onResolvedCb.push(s),this._onRejectedCb.push(o);break;case 1:s(this._v);break;case 2:o(this._v)}}},{key:"_resolveWrapper",value:function(e,t,n){var i=this;return function(r){setTimeout(function(){if(!i._isFunction(n))return e(r);try{var s=n(r);i._isFunction(s)?s.then(e,t):e(s)}catch(e){t(e)}})}}},{key:"_rejectWrapper",value:function(e,t,n){var i=this;return function(r){setTimeout(function(){if(!i._isFunction(n))return t(r);try{var s=n(r);i._isFunction(s)?s.then(e,t):e(s)}catch(e){t(e)}})}}},{key:"_isFunction",value:function(e){return e&&"function"==typeof e}}]),e}();t.default=s,e.exports=t.default});