!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.promise=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=0,o=function(){function e(t){if(n(this,e),!this._isFunction(t))throw new TypeError("Promise argument error:"+t.toString());this._status=i,this._v=void 0,this._onResolvedCb=[],this._onRejectedCb=[],t(this._resolve.bind(this),this._reject.bind(this))}return r(e,[{key:"_resolve",value:function(e){var t=this;this._status===i&&(this._status=1,this._v=e,setTimeout(function(){for(var n=void 0;n=t._onResolvedCb.shift();)n.call(t,e)}))}},{key:"_reject",value:function(e){var t=this;this._status===i&&(this._status=2,this._v=e,setTimeout(function(){for(var n=void 0;n=t._onRejectedCb.shift();)n.call(t,e)}))}},{key:"then",value:function(t,n){var r=this;return new e(function(e,i){return r._thenHandler(e,i,t,n)})}},{key:"_thenHandler",value:function(e,t,n,r){var o=this._resolveWrapper(e,t,n),u=this._rejectWrapper(e,t,r);switch(this._status){case i:this._onResolvedCb.push(o),this._onRejectedCb.push(u);break;case 1:o(this._v);break;case 2:u(this._v)}}},{key:"_resolveWrapper",value:function(e,t,n){var r=this;return function(i){setTimeout(function(){if(!r._isFunction(n))return e(i);try{var o=n(i);r._isFunction(o)?o.then(e,t):e(o)}catch(e){t(e)}})}}},{key:"_rejectWrapper",value:function(e,t,n){var r=this;return function(i){setTimeout(function(){if(!r._isFunction(n))return t(i);try{var o=n(i);r._isFunction(o)?o.then(e,t):e(o)}catch(e){t(e)}})}}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_isFunction",value:function(e){return e&&"function"==typeof e}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"all",value:function(t){if(!Array.isArray(t))throw new TypeError(t+" is not array!");return new e(function(e,n){function r(t){return function(n){o[t]=n,--i||e(o)}}var i=t.length,o=[];t.forEach(function(e,t){return e.then(r(t),n)})})}},{key:"race",value:function(t){if(!Array.isArray(t))throw new TypeError(t+" is not array!");return new e(function(e,n){t.forEach(function(t){return t.then(e,n)})})}}]),e}();t.default=o,e.exports=t.default});